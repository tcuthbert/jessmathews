{% extends "photologue/root.html" %}
{% load photologue_tags i18n %}

{% block title %}{{ object.title }}{% endblock %}

{% block content %}

    <div class="row col-lg-12 text-center">
        <h1 class="page-header">{{ object.title }}</h1>
        <p class="muted"><small>{% trans "Published" %} {{ object.date_added }}</small></p>
    </div>

    <div class="row text-center center-block">
        <div class="col-lg-12">
            {% if object.public_galleries %}
								<ul id="imageGallery" class="cs-hidden">
                    {% for gallery in object.public_galleries %}
											{% for photo in gallery.public %}
											<li data-thumb="{{ photo.get_thumbnail_url }}" data-src="{{ photo.image.url }}">
												<img src="{{ photo.get_display_url }}" alt="{{ photo.title }}">
											</li>
											{% endfor %}
										{% endfor %}
								</ul>
						{% endif %}
        </div>
    </div>
<script type="text/javascript">
	$(document).ready(function() {
		var slider = $('#imageGallery').lightSlider({
			adaptiveHeight:true,
			adaptiveWidth:true,
			gallery:true,
			item:1,
			loop:true,
			thumbItem:9,
			slideMargin:0,
			enableDrag: false,
			currentPagerPosition:'left',
			speed: 0,
			onSliderLoad: function(el) {
				el.lightGallery({
					selector: '#imageGallery .lslide'
				});
				$("imageGallery").removeClass('cS-hidden');
				$(".lSPrev").append('<button id="slide-left" type="button" class="btn btn-default" aria-label="Left Align"> \
	<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> \
	</button>')
				$(".lSNext").append('<button id="slide-right" type="button" class="btn btn-default" aria-label="Left Align"> \
	<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> \
	</button>')
				$('#imageGallery>li').each(function( index ) {

					if ($( this ).children('img[alt="{{ photo.title }}"]').length > 0) {
						slider.goToSlide(index);
					};
				});
        setTimeout(function () {
            $('#imageGallery').parent().css('transition-duration', '400ms');
					  slider.refresh();
        }, 1000);
			}
		});
	});
</script>
{% endblock %}
